document.addEventListener('DOMContentLoaded', () => {
    const situations = [
        {
            title: 'وضعية إدماجية: رحلة مدرسية',
            question: `
                <h4>نص الوضعية:</h4>
                <p>نظمت متوسطة رحلة مدرسية إلى حديقة التجارب لفائدة 45 تلميذًا و 3 أساتذة مؤطرين. للمشاركة، دفع كل تلميذ مبلغ 250 دينارًا جزائريًا، بينما ساهمت إدارة المتوسطة بمبلغ 4750 دينارًا.</p>
                <p>إذا علمت أن تكلفة النقل الجماعي قدرت بـ 12000 دينار، وتكلفة وجبات الغداء لجميع المشاركين هي 6000 دينار.</p>
                <h4>الأسئلة:</h4>
                <ol>
                    <li>احسب المبلغ الإجمالي الذي ساهم به التلاميذ.</li>
                    <li>ما هو المبلغ الإجمالي الذي تم جمعه لتغطية تكاليف الرحلة؟</li>
                    <li>هل المبلغ المجموع كافٍ لتغطية جميع تكاليف الرحلة؟ برر إجابتك.</li>
                </ol>
            `,
            solution: `
                <h4>خطوات الحل:</h4>
                <ol>
                    <li><strong>حساب مساهمة التلاميذ:</strong><br>
                        عدد التلاميذ: 45<br>
                        مساهمة كل تلميذ: 250 دج<br>
                        المبلغ الإجمالي = 45 × 250 = 11250 دج.</li>
                    <li><strong>حساب المبلغ الإجمالي المجموع:</strong><br>
                        مساهمة التلاميذ: 11250 دج<br>
                        مساهمة الإدارة: 4750 دج<br>
                        المبلغ الإجمالي = 11250 + 4750 = 16000 دج.</li>
                    <li><strong>حساب التكاليف الإجمالية ومقارنتها:</strong><br>
                        تكلفة النقل: 12000 دج<br>
                        تكلفة الغداء: 6000 دج<br>
                        التكاليف الإجمالية = 12000 + 6000 = 18000 دج.<br>
                        <strong>النتيجة:</strong> المبلغ المجموع (16000 دج) غير كافٍ لتغطية التكاليف (18000 دج)، حيث يوجد عجز قدره 2000 دج.</li>
                </ol>
            `
        },
        {
            title: 'وضعية إدماجية: حقل مستطيل الشكل',
            question: `
                <h4>نص الوضعية:</h4>
                <p>يملك فلاح قطعة أرض مستطيلة الشكل، طولها 120 مترًا وعرضها يساوي ثلثي (2/3) طولها.</p>
                <p>أراد الفلاح إحاطتها بسياج، مع ترك مدخل عرضه 4 أمتار.</p>
                <h4>الأسئلة:</h4>
                <ol>
                    <li>احسب عرض قطعة الأرض.</li>
                    <li>احسب محيط قطعة الأرض.</li>
                    <li>ما هو طول السياج اللازم لإحاطة القطعة؟</li>
                    <li>إذا كان ثمن المتر الواحد من السياج هو 150 دينارًا، فما هي التكلفة الإجمالية للسياج؟</li>
                </ol>
            `,
            solution: `
                <h4>خطوات الحل:</h4>
                <ol>
                    <li><strong>حساب عرض قطعة الأرض:</strong><br>
                        الطول = 120 مترًا<br>
                        العرض = 120 × (2/3) = 80 مترًا.</li>
                    <li><strong>حساب محيط قطعة الأرض:</strong><br>
                        المحيط = 2 × (الطول + العرض) = 2 × (120 + 80) = 2 × 200 = 400 متر.</li>
                    <li><strong>حساب طول السياج اللازم:</strong><br>
                        طول السياج = المحيط - عرض المدخل = 400 - 4 = 396 مترًا.</li>
                    <li><strong>حساب التكلفة الإجمالية للسياج:</strong><br>
                        التكلفة = طول السياج × ثمن المتر الواحد = 396 × 150 = 59400 دينار جزائري.</li>
                </ol>
            `
        },
        {
            title: 'وضعية إدماجية: توزيع الأرباح',
            question: `
                <h4>نص الوضعية:</h4>
                <p>اشترك ثلاثة إخوة في شراء هدية لوالدتهم ثمنها 4500 دينار. دفع الأخ الأول خُمس (1/5) المبلغ، ودفع الأخ الثاني ثلث (1/3) المبلغ، بينما دفع الأخ الثالث المبلغ المتبقي.</p>
                <h4>الأسئلة:</h4>
                <ol>
                    <li>ما هو المبلغ الذي دفعه الأخ الأول؟</li>
                    <li>ما هو المبلغ الذي دفعه الأخ الثاني؟</li>
                    <li>عبر بكسر عن المبلغ الذي دفعه الأخوان الأول والثاني معًا.</li>
                    <li>ما هو المبلغ الذي دفعه الأخ الثالث؟</li>
                </ol>
            `,
            solution: `
                <h4>خطوات الحل:</h4>
                <ol>
                    <li><strong>حساب مبلغ الأخ الأول:</strong><br>
                        المبلغ = 4500 × (1/5) = 900 دينار.</li>
                    <li><strong>حساب مبلغ الأخ الثاني:</strong><br>
                        المبلغ = 4500 × (1/3) = 1500 دينار.</li>
                    <li><strong>التعبير بكسر عن المبلغ المدفوع معًا:</strong><br>
                        الكسر = (1/5) + (1/3)<br>
                        توحيد المقامات: (3/15) + (5/15) = 8/15.</li>
                    <li><strong>حساب مبلغ الأخ الثالث:</strong><br>
                        المبلغ المتبقي = المبلغ الإجمالي - (مبلغ الأول + مبلغ الثاني)<br>
                        المبلغ = 4500 - (900 + 1500) = 4500 - 2400 = 2100 دينار.</li>
                </ol>
            `
        },
        {
            title: 'وضعية إدماجية: تخفيضات وعروض',
            question: `
                <h4>نص الوضعية:</h4>
                <p>قرر أحمد شراء بعض الأجهزة لمنزله خلال فترة التخفيضات. وجد تلفازًا سعره الأصلي 48000 دينار بتخفيض قدره 15%، وثلاجة سعرها 62000 دينار بتخفيض 20%.</p>
                <h4>الأسئلة:</h4>
                <ol>
                    <li>احسب قيمة التخفيض على التلفاز.</li>
                    <li>ما هو سعر التلفاز بعد التخفيض؟</li>
                    <li>احسب سعر الثلاجة بعد التخفيض.</li>
                    <li>ما هو المبلغ الإجمالي الذي سيدفعه أحمد لشراء الجهازين معًا؟</li>
                </ol>
            `,
            solution: `
                <h4>خطوات الحل:</h4>
                <ol>
                    <li><strong>حساب قيمة تخفيض التلفاز:</strong><br>
                        قيمة التخفيض = 48000 × (15 / 100) = 7200 دينار.</li>
                    <li><strong>حساب سعر التلفاز بعد التخفيض:</strong><br>
                        السعر الجديد = السعر الأصلي - قيمة التخفيض = 48000 - 7200 = 40800 دينار.</li>
                    <li><strong>حساب سعر الثلاجة بعد التخفيض:</strong><br>
                        قيمة التخفيض = 62000 × (20 / 100) = 12400 دينار.<br>
                        السعر الجديد = 62000 - 12400 = 49600 دينار.</li>
                    <li><strong>حساب المبلغ الإجمالي:</strong><br>
                        المبلغ الإجمالي = سعر التلفاز بعد التخفيض + سعر الثلاجة بعد التخفيض<br>
                        المبلغ = 40800 + 49600 = 90400 دينار.</li>
                </ol>
            `
        },
        {
            title: 'وضعية إدماجية: رحلة بالسيارة',
            question: `
                <h4>نص الوضعية:</h4>
                <p>انطلقت عائلة في رحلة بالسيارة من مدينة A إلى مدينة B التي تبعد عنها مسافة 450 كيلومترًا. انطلقوا على الساعة 8:00 صباحًا وساروا بسرعة متوسطة قدرها 90 كم/ساعة.</p>
                <p>أخذوا استراحة لمدة 45 دقيقة في الطريق.</p>
                <h4>الأسئلة:</h4>
                <ol>
                    <li>ما هي المدة الزمنية التي ستستغرقها السيارة لقطع المسافة دون توقف؟</li>
                    <li>احسب المدة الإجمالية للرحلة (مع حساب وقت الاستراحة).</li>
                    <li>في أي ساعة ستصل العائلة إلى المدينة B؟</li>
                </ol>
            `,
            solution: `
                <h4>خطوات الحل:</h4>
                <ol>
                    <li><strong>حساب مدة السفر دون توقف:</strong><br>
                        الزمن = المسافة / السرعة المتوسطة<br>
                        الزمن = 450 / 90 = 5 ساعات.</li>
                    <li><strong>حساب المدة الإجمالية للرحلة:</strong><br>
                        المدة الإجمالية = مدة السفر + مدة الاستراحة<br>
                        المدة = 5 ساعات + 45 دقيقة = 5 ساعات و 45 دقيقة.</li>
                    <li><strong>حساب وقت الوصول:</strong><br>
                        وقت الانطلاق: 8:00 صباحًا<br>
                        وقت الوصول = 8:00 + 5 ساعات و 45 دقيقة = 13:45، أي الساعة الواحدة و 45 دقيقة بعد الزوال.</li>
                </ol>
            `
        },
        {
            title: 'وضعية إدماجية: ملء مسبح',
            question: `
                <h4>نص الوضعية:</h4>
                <p>مسبح على شكل متوازي مستطيلات، طوله 25 مترًا، عرضه 10 أمتار، وعمقه 2 متر.</p>
                <h4>الأسئلة:</h4>
                <ol>
                    <li>احسب حجم المسبح (بالمتر المكعب m³).</li>
                    <li>إذا علمت أن 1 متر مكعب = 1000 لتر، فما هي سعة المسبح باللتر؟</li>
                    <li>إذا تم استخدام مضخة تضخ 5000 لتر في الساعة، فكم ساعة تلزم لملء المسبح بالكامل؟</li>
                </ol>
            `,
            solution: `
                <h4>خطوات الحل:</h4>
                <ol>
                    <li><strong>حساب حجم المسبح:</strong><br>
                        الحجم = الطول × العرض × العمق<br>
                        الحجم = 25 × 10 × 2 = 500 متر مكعب.</li>
                    <li><strong>حساب سعة المسبح باللتر:</strong><br>
                        السعة = الحجم بالمتر المكعب × 1000<br>
                        السعة = 500 × 1000 = 500000 لتر.</li>
                    <li><strong>حساب زمن ملء المسبح:</strong><br>
                        الزمن = سعة المسبح / معدل تدفق المضخة<br>
                        الزمن = 500000 / 5000 = 100 ساعة.</li>
                </ol>
            `
        },
        {
            title: 'وضعية إدماجية: خريطة الكنز',
            question: `
                <h4>نص الوضعية:</h4>
                <p>وجد علي خريطة قديمة مرسومة بمقياس رسم 1 / 200000.</p>
                <p>على الخريطة، كانت المسافة بين موقع الكنز وشجرة البلوط القديمة هي 4.5 سنتيمتر.</p>
                <h4>الأسئلة:</h4>
                <ol>
                    <li>ما هي المسافة الحقيقية بين الكنز والشجرة بالسنتيمتر؟</li>
                    <li>حول هذه المسافة إلى المتر.</li>
                    <li>حول هذه المسافة إلى الكيلومتر.</li>
                </ol>
            `,
            solution: `
                <h4>خطوات الحل:</h4>
                <ol>
                    <li><strong>حساب المسافة الحقيقية بالسنتيمتر:</strong><br>
                        المسافة الحقيقية = المسافة على الخريطة × مقام المقياس<br>
                        المسافة = 4.5 × 200000 = 900000 سنتيمتر.</li>
                    <li><strong>تحويل المسافة إلى المتر:</strong><br>
                        لتحويل من سم إلى م، نقسم على 100.<br>
                        المسافة بالمتر = 900000 / 100 = 9000 متر.</li>
                    <li><strong>تحويل المسافة إلى الكيلومتر:</strong><br>
                        لتحويل من م إلى كم، نقسم على 1000.<br>
                        المسافة بالكيلومتر = 9000 / 1000 = 9 كيلومتر.</li>
                </ol>
            `
        },
        {
            title: 'وضعية إدماجية: تنظيم معطيات',
            question: `
                <h4>نص الوضعية:</h4>
                <p>يمثل الجدول التالي عدد زوار أحد المتاحف خلال أسبوع:</p>
                <table class="data-table">
                    <tr>
                        <th>اليوم</th>
                        <td>السبت</td>
                        <td>الأحد</td>
                        <td>الاثنين</td>
                        <td>الثلاثاء</td>
                        <td>الأربعاء</td>
                        <td>الخميس</td>
                    </tr>
                    <tr>
                        <th>عدد الزوار</th>
                        <td>450</td>
                        <td>320</td>
                        <td>280</td>
                        <td>350</td>
                        <td>410</td>
                        <td>520</td>
                    </tr>
                </table>
                <h4>الأسئلة:</h4>
                <ol>
                    <li>ما هو اليوم الذي شهد أكبر عدد من الزوار؟ وما هو اليوم الأقل عددًا؟</li>
                    <li>ما هو مجموع عدد الزوار خلال عطلة نهاية الأسبوع (السبت والأحد)؟</li>
                    <li>احسب متوسط عدد الزوار اليومي خلال هذا الأسبوع (بالتقريب إلى الوحدة).</li>
                </ol>
            `,
            solution: `
                <h4>خطوات الحل:</h4>
                <ol>
                    <li><strong>تحديد اليوم الأكثر والأقل زوارًا:</strong><br>
                        من الجدول، اليوم الأكثر زوارًا هو الخميس (520 زائرًا).<br>
                        اليوم الأقل زوارًا هو الاثنين (280 زائرًا).</li>
                    <li><strong>حساب مجموع زوار نهاية الأسبوع:</strong><br>
                        المجموع = عدد زوار السبت + عدد زوار الأحد = 450 + 320 = 770 زائرًا.</li>
                    <li><strong>حساب متوسط عدد الزوار اليومي:</strong><br>
                        مجموع الزوار الكلي = 450 + 320 + 280 + 350 + 410 + 520 = 2330 زائرًا.<br>
                        المتوسط = المجموع الكلي / عدد الأيام = 2330 / 6 ≈ 388 زائرًا في اليوم.</li>
                </ol>
            `
        },
        {
            title: 'وضعية إدماجية: وصفة كعكة (التناسبية)',
            question: `
                <h4>نص الوضعية:</h4>
                <p>لتحضير كعكة لـ 6 أشخاص، نحتاج إلى المقادير التالية: 150 غرام من الطحين، 90 غرام من السكر، و 3 بيضات.</p>
                <h4>الأسئلة:</h4>
                <ol>
                    <li>ما هي كمية الطحين اللازمة لتحضير كعكة لـ 10 أشخاص؟</li>
                    <li>إذا استخدمنا 5 بيضات، فكم شخصًا يمكننا أن نخدم بهذه الكعكة؟</li>
                </ol>
            `,
            solution: `
                <h4>خطوات الحل:</h4>
                <ol>
                    <li><strong>حساب كمية الطحين لـ 10 أشخاص (باستخدام الطريقة الثلاثية):</strong><br>
                        6 أشخاص -> 150 غ طحين<br>
                        10 أشخاص -> ؟ غ طحين<br>
                        الكمية = (10 × 150) / 6 = 1500 / 6 = 250 غرام من الطحين.</li>
                    <li><strong>حساب عدد الأشخاص لـ 5 بيضات:</strong><br>
                        3 بيضات -> 6 أشخاص<br>
                        5 بيضات -> ؟ شخص<br>
                        عدد الأشخاص = (5 × 6) / 3 = 30 / 3 = 10 أشخاص.</li>
                </ol>
            `
        }
        // يمكن إضافة المزيد من الوضعيات هنا
    ];

    let currentSituationIndex = 0;

    const situationTitleElement = document.getElementById('situationTitle');
    const situationQuestionElement = document.getElementById('situationQuestion');
    const solutionContentElement = document.getElementById('solutionContent');
    const situationSolutionElement = document.getElementById('situationSolution');
    const showSolutionBtn = document.getElementById('showSolutionBtn');
    const nextSituationBtn = document.getElementById('nextSituationBtn');

    function loadSituation(index) {
        const situation = situations[index];
        situationTitleElement.textContent = situation.title;
        situationQuestionElement.innerHTML = situation.question;
        solutionContentElement.innerHTML = situation.solution;
        situationSolutionElement.style.display = 'none'; // إخفاء الحل عند تحميل وضعية جديدة
    }

    showSolutionBtn.addEventListener('click', () => {
        situationSolutionElement.style.display = situationSolutionElement.style.display === 'none' ? 'block' : 'none';
    });

    nextSituationBtn.addEventListener('click', () => {
        currentSituationIndex = (currentSituationIndex + 1) % situations.length;
        loadSituation(currentSituationIndex);
    });

    // تحميل أول وضعية عند فتح الصفحة
    loadSituation(currentSituationIndex);
});
